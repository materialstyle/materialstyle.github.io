<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>

<script src="/assets/3.0/js/materialstyle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script src="/assets/3.0/js/site.js"></script>

<script>

  anchors.add('h2');

  // Shape
  var shapeList = [].slice.call(document.querySelectorAll('.m-shape-container'))
  var shapes = shapeList.map(function (s) {
    return new materialstyle.Shape(s)
  })

  // Button Ripple
  var buttonList = [].slice.call(document.querySelectorAll('.btn'))
  buttonList.map(function (button) {
    new materialstyle.Ripple(button)
  })

  // Initialize File Input
  var fileInputList = [].slice.call(document.querySelectorAll('.m-file-input'))
  fileInputList.map(function (button) {
    new materialstyle.FileInput(button)
  })

  // Text Field
  var textFieldList = [].slice.call(document.querySelectorAll('.m-text-field'))
  var textFields = textFieldList.map(function (textField) {
    return new materialstyle.TextField(textField)
  })

  // Select Field
  var selectList = [].slice.call(document.querySelectorAll('.m-select'))
  var selects = selectList.map(function (select) {
    return new materialstyle.SelectField(select)
  })

  // Tab
  var navLinks = [].slice.call(document.querySelectorAll('.nav-tabs .nav-link'))
  navLinks.map(function (navLink) {
    new materialstyle.Ripple(navLink)
  })

  var tabs = [].slice.call(document.querySelectorAll('.nav-tabs'))
  tabs.map(function (tab) {
    new materialstyle.Tab(tab)
  })

  // Drawer
  var drawers = [].slice.call(document.querySelectorAll('.drawer'))
  var drawerList = drawers.map(function (drawer) {
    return new materialstyle.Drawer(drawer)
  })

  // Popover
  var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
  var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
    return new materialstyle.Popover(popoverTriggerEl)
  })

  // Progress Bar
  var rainbowList = [].slice.call(document.querySelectorAll('.m-rainbow'))
  var progressList = rainbowList.map(function (rainbow) {
    return new materialstyle.Rainbow(rainbow)
  })

  // Modal
  var myModal = document.getElementById('myModal')
  if (myModal) {
    myModal.addEventListener('shown.bs.modal', function (event) {
      // Redraw Text Field
      var textFields = document.querySelectorAll('.m-text-field');
      for (const [, value] of Object.entries(textFields)) {
        var textFieldInstance = materialstyle.TextField.getOrCreateInstance(value)
        textFieldInstance.redraw();
      }

      // Redraw Select Field
      var selectFields = document.querySelectorAll('.m-select');
      for (const [, value] of Object.entries(selectFields)) {
        var selectFieldInstance = materialstyle.SelectField.getOrCreateInstance(value)
        selectFieldInstance.redraw();
      }

      // Redraw Tabs
      var tabs = document.querySelector('.nav-tabs');
      var tabInstance = materialstyle.Tab.getOrCreateInstance(tabs)
      tabInstance.redraw();

      // Snackbar
      var snackbarButton = document.querySelector('#show-modal-snackbar');
      snackbarButton.addEventListener('click', function () {
        new materialstyle.Snackbar(document.querySelector('#modal-snackbar'), {
          'visibleDuration': 3000
        });
      });

    })
  }


  $(function () {
    $('.adspace').html('').hide();

    docsearch({
      apiKey: '030593aaea3dc2b6c6bc27a3ac4ffd49',
      indexName: 'materialstyle',
      inputSelector: '#searchBox',
      algoliaOptions: {'facetFilters': ["version:2.0"]},
      debug: false,
      handleSelected: function (input, event, suggestion, datasetNumber, context) {
        $('#searchContainer').modal('hide');
        location.href = suggestion.url;
      }
    });

    // $('#searchContainer').on('shown.bs.modal', function () {
    //     $('#searchBox').focus();
    // });
  })
</script>
